var He=Object.defineProperty,Ge=Object.defineProperties;var Ke=Object.getOwnPropertyDescriptors;var Ae=Object.getOwnPropertySymbols;var Ze=Object.prototype.hasOwnProperty,qe=Object.prototype.propertyIsEnumerable;var ze=(w,n,l)=>n in w?He(w,n,{enumerable:!0,configurable:!0,writable:!0,value:l}):w[n]=l,je=(w,n)=>{for(var l in n||(n={}))Ze.call(n,l)&&ze(w,l,n[l]);if(Ae)for(var l of Ae(n))qe.call(n,l)&&ze(w,l,n[l]);return w},Ee=(w,n)=>Ge(w,Ke(n));import{r as b,v as Xe,n as Ye,d as Qe,u as le,o as me,s as et,a as d,c as m,b as r,w as v,e,f as t,g as tt,h as q,m as st,i as U,T as X,j as ee,k as N,p as Pe,A as Me,R as ge,F as R,l as Z,q as xe,t as k,x as L,y as ve,M as te,z as J,B as se,C as ae,D as I,E as Y,G as C,H as S,I as oe,J as at,K as ot,L as Le,N as Q,O as ne,P as fe,Q as Ne,S as Ve,U as re,V as P,W as ye,X as H,Y as We,Z as ue,_ as Re,$ as nt,a0 as Oe,a1 as rt,a2 as lt,a3 as De,a4 as Ie,a5 as _e,a6 as be,a7 as we,a8 as $e,a9 as it,aa as dt,ab as ct,ac as ut}from"./vendor.4f04759c.js";const mt=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&i(g)}).observe(document,{childList:!0,subtree:!0});function l(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerpolicy&&(o.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?o.credentials="include":s.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(s){if(s.ep)return;s.ep=!0;const o=l(s);fetch(s.href,o)}};mt();function ft(w={}){const{immediate:n=!1,onNeedRefresh:l,onOfflineReady:i,onRegistered:s,onRegisterError:o}=w;let g,y;const a=async(p=!0)=>{p&&(g==null||g.addEventListener("controlling",j=>{j.isUpdate&&window.location.reload()})),y&&y.waiting&&await Ye(y.waiting,{type:"SKIP_WAITING"})};if("serviceWorker"in navigator){g=new Xe("/sw.js",{scope:"/",type:"classic"}),g.addEventListener("activated",p=>{p.isUpdate||i==null||i()});{const p=()=>{l==null||l()};g.addEventListener("waiting",p),g.addEventListener("externalwaiting",p)}g.register({immediate:n}).then(p=>{y=p,s==null||s(p)}).catch(p=>{o==null||o(p)})}return a}function pt(w={}){const{immediate:n=!0,onNeedRefresh:l,onOfflineReady:i,onRegistered:s,onRegisterError:o}=w,g=b(!1),y=b(!1);return{updateServiceWorker:ft({immediate:n,onNeedRefresh(){g.value=!0,l==null||l()},onOfflineReady(){y.value=!0,i==null||i()},onRegistered:s,onRegisterError:o}),offlineReady:y,needRefresh:g}}function he(w){const n=G();(n.aktiverUser!=null||w)&&localStorage.setItem(n.$id,JSON.stringify(n.$state))}const G=Qe("Coming-Home-Safe",{state:()=>({aktiverUser:null,userServiceWorker:null}),getters:{getAktivenUser(){return this.aktiverUser},isAdmin(){try{return!!this.aktiverUser.isAdmin}catch{return!1}},getServiceWorker(w){return w.userServiceWorker}},actions:{setAktivenUser(w){this.aktiverUser=w,he()},deleteAktivenUser(){this.aktiverUser=null,he(!0)},changeAktivenUser(w){this.aktiverUser=w,he()},async connectToServiceWorker(w){let n=await navigator.serviceWorker.getRegistration("/service_worker_chs.js");n.active.postMessage(JSON.stringify({type:"userConnect",userId:this.getAktivenUser.k_id,payload:{email:this.getAktivenUser.email,ws_devMode:w}})),this.userServiceWorker=n},async disconnectFromServiceWorker(){if(!this.userServiceWorker)return console.log("ServiceWorker nicht vorhanden");this.userServiceWorker.active.postMessage(JSON.stringify({type:"userDisconnect",userId:this.getAktivenUser.k_id,payload:"kein Payload dabei"})),await this.userServiceWorker.unregister(),this.userServiceWorker=null}}}),ht={class:"flex max-w-7xl mx-auto px-2 sm:px-6 lg:px-8 justify-end p-2 sm:py-4"},vt=e("span",{class:"sr-only"},"Open user menu",-1),gt=["src"],xt={setup(w){const n=G(),l=le();me(async()=>{await pt(),localStorage.getItem(n.$id)&&(n.$state=JSON.parse(localStorage.getItem(n.$id)));let s=new et;s.disable(),await s.enable()});function i(){n.disconnectFromServiceWorker(),n.deleteAktivenUser(),l.push("/")}return(s,o)=>(d(),m(R,null,[r(t(Me),{as:"nav",class:"bg-white shadow"},{default:v(({open:g})=>[e("div",ht,[r(t(tt),{as:"div",class:"ml-3 relative"},{default:v(()=>[e("div",null,[t(n).getAktivenUser?(d(),q(t(st),{key:0,class:"bg-white rounded-full flex text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},{default:v(()=>[vt,e("img",{crossorigin:"anonymous",async:"",class:"h-10 w-10 rounded-full",src:t(n).aktiverUser.link_thumbnail,alt:""},null,8,gt)]),_:1})):U("",!0)]),r(X,{"enter-active-class":"transition ease-out duration-200","enter-from-class":"transform opacity-0 scale-95","enter-to-class":"transform opacity-100 scale-100","leave-active-class":"transition ease-in duration-75","leave-from-class":"transform opacity-100 scale-100","leave-to-class":"transform opacity-0 scale-95"},{default:v(()=>[t(n).isAdmin?(d(),q(t(Pe),{key:0,class:"z-40 origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:v(()=>[r(t(ee),null,{default:v(({active:y})=>[e("a",{onClick:o[0]||(o[0]=a=>t(l).push("/mitarbeiterMap")),class:N([y?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},"Track User",2)]),_:1}),r(t(ee),null,{default:v(({active:y})=>[e("a",{onClick:o[1]||(o[1]=a=>t(l).push("/account")),class:N([y?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},"Account",2)]),_:1}),r(t(ee),null,{default:v(({active:y})=>[e("a",{onClick:i,class:N([y?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},"Sign out",2)]),_:1})]),_:1})):(d(),q(t(Pe),{key:1,class:"z-40 origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"},{default:v(()=>[r(t(ee),null,{default:v(({active:y})=>[e("a",{onClick:o[2]||(o[2]=a=>t(l).push("/userMap")),class:N([y?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},"Tracking",2)]),_:1}),r(t(ee),null,{default:v(({active:y})=>[e("a",{onClick:o[3]||(o[3]=a=>t(l).push("/account")),class:N([y?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},"Account",2)]),_:1}),r(t(ee),null,{default:v(({active:y})=>[e("a",{onClick:i,class:N([y?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"])},"Sign out",2)]),_:1})]),_:1}))]),_:1})]),_:1})])]),_:1}),e("div",null,[r(t(ge))])],64))}},yt="modulepreload",Te={},_t="/",bt=function(n,l){return!l||l.length===0?n():Promise.all(l.map(i=>{if(i=`${_t}${i}`,i in Te)return;Te[i]=!0;const s=i.endsWith(".css"),o=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${o}`))return;const g=document.createElement("link");if(g.rel=s?"stylesheet":yt,s||(g.as="script",g.crossOrigin=""),g.href=i,document.head.appendChild(g),s)return new Promise((y,a)=>{g.addEventListener("load",y),g.addEventListener("error",()=>a(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>n())},wt={setup(w){return(n,l)=>(d(),m("div",null,[r(t(ge))]))}},$t={"aria-live":"assertive",class:"z-50 fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start"},kt={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},Ct={key:0,class:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},St={class:"p-4"},Ut={class:"flex items-start"},At={class:"flex-shrink-0"},zt={class:"ml-3 w-0 flex-1 pt-0.5"},jt=e("p",{class:"text-sm font-medium text-gray-900"},"Neue Nachricht",-1),Et={class:"mt-1 text-sm text-gray-500"},Pt={class:"ml-4 flex-shrink-0 flex"},Dt=e("span",{class:"sr-only"},"Close",-1),Tt=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Mt={class:"fixed inset-0 overflow-hidden"},Lt={class:"absolute inset-0 overflow-hidden"},Nt={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10"},Vt={class:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl"},Wt={class:"px-4 sm:px-6"},Rt={class:"flex items-start justify-between"},Ot={class:"ml-3 flex h-7 items-center"},It=e("span",{class:"sr-only"},"Close panel",-1),Bt={class:"relative mt-6 flex-1 px-4 sm:px-6"},Ft={key:0,class:"w-full max-h-96 border-2 border-gray-300 mb-6 overflow-scroll"},Jt={class:"ml-1 italic font-thin"},Ht={class:"relative"},Gt={class:"border border-gray-300 rounded-lg shadow-sm overflow-hidden focus-within:border-teal-500 focus-within:ring-1 focus-within:ring-teal-500"},Kt=e("label",{for:"description",class:"sr-only"},"Description",-1),Zt=e("div",{"aria-hidden":"true"},[e("div",{class:"py-2"},[e("div",{class:"h-9"})]),e("div",{class:"h-px"}),e("div",{class:"py-2"},[e("div",{class:"py-px"},[e("div",{class:"h-9"})])])],-1),qt=e("div",{class:"flex flex-row justify-center m-3 align-middle"},[e("h1",{class:"text-4xl mt-3 mb-5 mx-4"},"Tracking")],-1),Xt=e("div",{id:"map",style:{height:"600px"}},null,-1),Yt={key:0,class:"text-center text-3xl font-bold my-4"},Qt={key:1,class:"text-center text-3xl font-bold my-4"},es={role:"list",class:"grid grid-cols-1 gap-6 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 mx-3"},ts={class:"flex-1 flex flex-col p-8"},ss=["src"],as={class:"mt-6 text-gray-900 text-sm font-medium"},os={class:"mt-1 flex-grow flex flex-col justify-between"},ns={class:"mt-3"},rs={class:"-mt-px flex divide-x divide-gray-200"},ls={class:"w-0 flex-1 flex"},is=["onClick"],ds=e("span",{class:"ml-3"},"Show on Map",-1),cs={class:"-ml-px w-0 flex-1 flex"},us=["onClick"],ms=e("span",{class:"ml-3"},"Chat",-1),fs={setup(w){const n=G();let l=b(!1),i=b(null),s=b(!1),o=b(""),g=b([]),y=b([]),a=b(null),p="pk.eyJ1IjoiY29taW5naG9tZXNhZmUiLCJhIjoiY2wwN3RzZThnMDF3czNjbzFndnNrZ3h4OCJ9.xuaKaO_7XzSqiIBCAvcT7w",j="mapbox://styles/mapbox/streets-v11",f=b(null),B=b("ws://localhost:2410"),T=b(""),V=b([]);me(async()=>{Z.accessToken=p,a.value=new Z.Map({container:"map",style:j,center:[16,48],zoom:11});let{coords:{latitude:$,longitude:z}}=await x();a.value.setCenter([z,$]),f.value=new WebSocket(B.value,n.getAktivenUser.email.replace("@","|")),f.value.onmessage=({data:M})=>{let D=JSON.parse(M);console.log(D);const K=D.from;if(D.type=="MessageUser")g.value.find(ie=>ie.user.email==K).nachrichten.push({message:D.data,from:K}),i.value!=null?K!=i.value.user.email&&(o.value=K,s.value=!0):(o.value=K,s.value=!0),setTimeout(()=>s.value=!1,3e3);else if(D.type=="getPosition"){console.log("Positionen Bekommen"),console.log(D.data);let F=g.value.find(ie=>ie.user.k_id==D.data.user.k_id);F?(F.lat=D.data.lat,F.lng=D.data.lng,F.dataTime=D.data.dataTime,F.adresse=D.data.adresse):g.value.push(Ee(je({},D.data),{userfarbe:"#"+Math.floor(Math.random()*16777215).toString(16),nachrichten:[]})),W()}else if(D.type=="userLeft"){console.log("User Left!!!!"),g.value=g.value.filter(F=>F.user.email!==D.data);try{y.value.forEach(F=>{F.user.email==D.data&&F.marker.remove()})}catch{console.log("Fehler beim Entfernen des Usermarkers")}}}});function W(){y.value.forEach($=>$.marker.remove()),g.value.forEach($=>{const z=new Z.Marker({anchor:"center",color:$.userfarbe}).setLngLat([$.lng,$.lat]).addTo(a.value).setPopup(new Z.Popup().setHTML(`<p>Adresse: ${$.adresse} </p>`));y.value.push({marker:z,user:$.user})})}async function c($){$.preventDefault(),console.log(V.value[0].from),f.value.send(JSON.stringify({type:"MessageMitarbeiter",daten:T.value,to:V.value[0].from})),V.value.push({from:"Ich",message:T.value}),T.value=""}async function x(){return new Promise(function($,z){navigator.geolocation.getCurrentPosition($,z)})}function _($){console.log($),a.value.flyTo({center:[$.lng,$.lat],zoom:13})}function u($){console.log("User: ",$),i.value=g.value.find(z=>z.user.email==$),console.log(i.value),V.value=i.value.nachrichten,l.value=!0}function h(){l.value=!1,i.value=null}return($,z)=>(d(),m(R,null,[e("div",$t,[e("div",kt,[r(X,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[t(s)?(d(),m("div",Ct,[e("div",St,[e("div",Ut,[e("div",At,[r(t(xe),{class:"h-6 w-6 text-green-400","aria-hidden":"true"})]),e("div",zt,[jt,e("p",Et," Sie haben eine neue Nachricht von "+k(t(o))+" bekommen ",1)]),e("div",Pt,[e("button",{type:"button",onClick:z[0]||(z[0]=M=>L(s)?s.value=!1:s=!1),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500"},[Dt,r(t(ve),{class:"h-5 w-5","aria-hidden":"true"})])])])])])):U("",!0)]),_:1})])]),r(t(oe),{as:"template",show:t(l)},{default:v(()=>[r(t(te),{as:"div",class:"relative z-10",onClose:z[2]||(z[2]=M=>L(l)?l.value=!0:l=!0)},{default:v(()=>[r(t(J),{as:"template",enter:"ease-in-out duration-500","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-500","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[Tt]),_:1}),e("div",Mt,[e("div",Lt,[e("div",Nt,[r(t(J),{as:"template",enter:"transform transition ease-in-out duration-500 sm:duration-700","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:v(()=>[r(t(se),{class:"pointer-events-auto w-screen max-w-md"},{default:v(()=>[e("div",Vt,[e("div",Wt,[e("div",Rt,[r(t(ae),{class:"text-lg font-medium text-gray-900"},{default:v(()=>[I(" Schreibe mit "+k(t(i).user.vorname)+" "+k(t(i).user.nachname),1)]),_:1}),e("div",Ot,[e("button",{type:"button",class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",onClick:h},[It,r(t(ve),{class:"h-6 w-6","aria-hidden":"true"})])])])]),e("div",Bt,[t(V).length>0?(d(),m("div",Ft,[(d(!0),m(R,null,Y(t(V),(M,D)=>(d(),m("p",{key:D},[e("span",Jt,k(M.from)+":",1),I(" "+k(M.message),1)]))),128))])):U("",!0),e("form",Ht,[e("div",Gt,[Kt,C(e("textarea",{"onUpdate:modelValue":z[1]||(z[1]=M=>L(T)?T.value=M:T=M),rows:"2",name:"description",id:"description",class:"block w-full border-0 py-0 resize-none placeholder-gray-500 focus:ring-0 sm:text-sm",placeholder:"Schreiben Sie eine Nachticht"},null,512),[[S,t(T)]]),Zt]),e("div",{class:"absolute bottom-0 inset-x-px"},[e("div",{class:"border-t border-gray-200 px-2 py-2 flex items-center space-x-3 sm:px-3 justify-end mr-3"},[e("button",{onClick:c,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," Senden ")])])])])])]),_:1})]),_:1})])])])]),_:1})]),_:1},8,["show"]),qt,Xt,t(g).length>0?(d(),m("h1",Yt,"Aktive User")):(d(),m("h1",Qt,"Momentan ist kein User aktiv")),e("ul",es,[(d(!0),m(R,null,Y(t(g),M=>(d(),m("li",{key:M.user.email,class:"col-span-1 flex flex-col text-center bg-white rounded-lg shadow divide-y divide-gray-200"},[e("div",ts,[e("img",{async:"",crossorigin:"anonymous",class:"w-32 h-32 flex-shrink-0 mx-auto rounded-full",src:M.user.link_thumbnail,alt:""},null,8,ss),e("h3",as,k(M.user.vorname)+" "+k(M.user.nachname),1),e("dl",os,[e("dd",ns,[e("span",{class:"px-3 py-1 text-xs font-medium rounded-full",style:at("background-color:"+M.userfarbe)},null,4)])])]),e("div",null,[e("div",rs,[e("div",ls,[e("p",{class:"relative -mr-px w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-gray-700 font-medium border border-transparent rounded-bl-lg hover:text-gray-500 cursor-pointer",onClick:D=>_(M)},[r(t(ot),{class:"w-5 h-5 text-gray-400","aria-hidden":"true"}),ds],8,is)]),e("div",cs,[e("p",{onClick:D=>u(M.user.email),class:"relative w-0 flex-1 inline-flex items-center justify-center py-4 text-sm text-gray-700 font-medium border border-transparent rounded-br-lg hover:text-gray-500 cursor-pointer"},[r(t(Le),{class:"h-6 w-6","aria-hidden":"true"}),ms],8,us)])])])]))),128))])],64))}};var ke="/WebsiteIcons/Coming-Home-Safe-Icon.webp";const ps=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),hs={class:"fixed z-10 inset-0 overflow-y-auto"},vs={class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0"},gs={class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100"},xs={class:"mt-3 text-center sm:mt-5"},ys=I(" 2 Faktoren Best\xE4tigung "),_s={class:"mt-2"},bs=e("hr",null,null,-1),ws={class:"flex flex-col mt-6"},$s=I("Geben Sie den Code ein, der an "),ks={class:"font-bold"},Cs=I(" gesendet wurde"),Ss={id:"otp",class:"flex flex-row justify-center text-center px-2 mt-5"},Us={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},As={"aria-live":"assertive",class:"fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start z-40"},zs={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},js={key:0,class:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},Es={class:"p-4"},Ps={class:"flex items-start"},Ds={class:"flex-shrink-0"},Ts=e("div",{class:"ml-3 w-0 flex-1 pt-0.5"},[e("p",{class:"text-sm font-medium text-gray-900"},"Error"),e("p",{class:"mt-1 text-sm text-gray-500"}," There was an error when logging in. Please try again. ")],-1),Ms={class:"ml-4 flex-shrink-0 flex"},Ls=e("span",{class:"sr-only"},"Close",-1),Ns={class:"min-h-full flex flex-col justify-center py-12 sm:px-6 lg:px-8"},Vs=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[e("img",{class:"mx-auto h-12 w-auto",src:ke,alt:"Electronic City"}),e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Login")],-1),Ws={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-md"},Rs={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},Os={class:"space-y-6",action:"#",method:"POST"},Is=e("label",{for:"email",class:"block text-sm font-medium text-gray-700"}," Email-Adresse ",-1),Bs={class:"mt-1"},Fs={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Js=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"}," Passwort ",-1),Hs={class:"mt-1"},Gs={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Ks={class:"flex items-center justify-between"},Zs={class:"text-sm"},qs={class:"text-sm"},Xs=["disabled"],Ys={setup(w){const n=G();let l=b(!0);const i=le();let s=b(!1),o=b(!1),g=b(""),y=b(null);const a=Q({char1:"",char2:"",char3:"",char4:"",char5:"",char6:""});let p=Q({email:"",password:""});const j=ne(()=>({email:{required:P,email:ye},password:{required:P}})),f=fe(j,p);async function B(W){W.preventDefault();try{if(f.value.$validate(),f.value.$error)console.log("Fehler");else{const c=await H.post("http://localhost:2410/login",{email:p.email,password:p.password});console.log(c.data),y.value=c.data.foundUser,c.status==200&&c.data.code=="kein Admin"?(n.setAktivenUser(y.value),n.connectToServiceWorker(l.value),i.push("/usermap")):(g.value=c.data.code,console.log("Code: ",g.value),o.value=!0)}W.preventDefault()}catch(c){W.preventDefault(),console.log(c.message),s.value=!0,setTimeout(()=>{s.value=!1},5e3)}finally{W.preventDefault()}}function T(){g.value==`${a.char1}${a.char2}${a.char3}${a.char4}${a.char5}${a.char6}`?(n.setAktivenUser(y.value),n.connectToServiceWorker(l.value),i.push("/mitarbeiterMap")):s.value=!0}const V=ne(()=>f.value.$invalid==!0);return(W,c)=>(d(),m(R,null,[r(t(oe),{as:"template",show:t(o)},{default:v(()=>[r(t(te),{as:"div",class:"relative z-10",onClose:c[7]||(c[7]=x=>L(o)?o.value=!1:o=!1)},{default:v(()=>[r(t(J),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[ps]),_:1}),e("div",hs,[e("div",vs,[r(t(J),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:v(()=>[r(t(se),{class:"relative bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-sm sm:w-full sm:p-6"},{default:v(()=>[e("div",null,[e("div",gs,[r(t(Ne),{class:"h-6 w-6","aria-hidden":"true"})]),e("div",xs,[r(t(ae),{as:"h3",class:"text-lg leading-6 font-medium text-gray-900"},{default:v(()=>[ys]),_:1}),e("div",_s,[bs,e("div",ws,[e("span",null,[$s,e("span",ks,k(t(p).email),1),Cs])]),e("div",Ss,[C(e("input",{"onUpdate:modelValue":c[0]||(c[0]=x=>t(a).char1=x),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"first",maxlength:"1"},null,512),[[S,t(a).char1]]),C(e("input",{"onUpdate:modelValue":c[1]||(c[1]=x=>t(a).char2=x),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"second",maxlength:"1"},null,512),[[S,t(a).char2]]),C(e("input",{"onUpdate:modelValue":c[2]||(c[2]=x=>t(a).char3=x),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"third",maxlength:"1"},null,512),[[S,t(a).char3]]),C(e("input",{"onUpdate:modelValue":c[3]||(c[3]=x=>t(a).char4=x),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"fourth",maxlength:"1"},null,512),[[S,t(a).char4]]),C(e("input",{"onUpdate:modelValue":c[4]||(c[4]=x=>t(a).char5=x),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"fifth",maxlength:"1"},null,512),[[S,t(a).char5]]),C(e("input",{"onUpdate:modelValue":c[5]||(c[5]=x=>t(a).char6=x),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"sixth",maxlength:"1"},null,512),[[S,t(a).char6]])])])])]),e("div",Us,[e("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-teal-600 text-base font-medium text-white hover:bg-teal-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:col-start-2 sm:text-sm",onClick:T}," Verifizieren "),e("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:c[6]||(c[6]=x=>L(o)?o.value=!1:o=!1),ref:"cancelButtonRef"}," Cancel ",512)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),e("div",As,[e("div",zs,[r(X,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[t(s)?(d(),m("div",js,[e("div",Es,[e("div",Ps,[e("div",Ds,[r(t(Ve),{class:"h-6 w-6 text-red-500","aria-hidden":"true"})]),Ts,e("div",Ms,[e("button",{onClick:c[8]||(c[8]=x=>L(s)?s.value=!1:s=!1),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2"},[Ls,r(t(re),{class:"h-5 w-5","aria-hidden":"true"})])])])])])):U("",!0)]),_:1})])]),e("div",Ns,[Vs,e("div",Ws,[e("div",Rs,[e("form",Os,[e("div",null,[Is,e("div",Bs,[C(e("input",{"onUpdate:modelValue":c[9]||(c[9]=x=>t(p).email=x),id:"email",name:"email",type:"email",autocomplete:"email",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(p).email]]),t(f).email.$invalid?(d(),m("p",Fs,k(t(f).email.$silentErrors[0].$message),1)):U("",!0)])]),e("div",null,[Js,e("div",Hs,[C(e("input",{"onUpdate:modelValue":c[10]||(c[10]=x=>t(p).password=x),id:"password",name:"password",type:"password",autocomplete:"current-password",required:"",class:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(p).password]]),t(f).password.$invalid?(d(),m("p",Gs,k(t(f).password.$silentErrors[0].$message),1)):U("",!0)])]),e("div",Ks,[e("div",Zs,[e("a",{onClick:c[11]||(c[11]=x=>t(i).push("/register")),class:"font-medium text-teal-600 hover:text-teal-500 underline"}," Erstellen Sie ein Konto ")]),e("div",qs,[e("a",{onClick:c[12]||(c[12]=x=>W.$router.push("/pw_vergessen")),class:"font-medium text-teal-600 hover:text-teal-500"}," Passwort vergessen ? ")])]),e("div",null,[t(V)?(d(),m("button",{key:1,disabled:t(V),class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," Sign in ",8,Xs)):(d(),m("button",{key:0,onClick:B,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," Sign in "))])])])])])],64))}},Qs=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),ea={class:"fixed z-10 inset-0 overflow-y-auto"},ta={class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0"},sa={class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-gray-100"},aa={class:"mt-3 text-center sm:mt-5"},oa=I(" 2 Faktoren Best\xE4tigung "),na={class:"mt-2"},ra=e("hr",null,null,-1),la={class:"flex flex-col mt-6"},ia=I("Geben Sie den Code ein, der an "),da={class:"font-bold"},ca=I(" gesendet wurde"),ua={id:"otp",class:"flex flex-row justify-center text-center px-2 mt-5"},ma={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},fa={"aria-live":"assertive",class:"fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start z-40"},pa={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},ha={key:0,class:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},va={class:"p-4"},ga={class:"flex items-start"},xa={class:"flex-shrink-0"},ya=e("div",{class:"ml-3 w-0 flex-1 pt-0.5"},[e("p",{class:"text-sm font-medium text-gray-900"},"Error"),e("p",{class:"mt-1 text-sm text-gray-500"}," Es gibt bereits einen User mit dieser Email-Adresse, bitte verwenden Sie eine andere ")],-1),_a={class:"ml-4 flex-shrink-0 flex"},ba=e("span",{class:"sr-only"},"Close",-1),wa={class:"min-h-full flex flex-col justify-center py-12 sm:px-6 lg:px-8"},$a=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-md"},[e("img",{class:"mx-auto h-12 w-auto",src:ke,alt:"Electronic City"}),e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"},"Register")],-1),ka={class:"mt-8 sm:mx-auto sm:w-full sm:max-w-3xl"},Ca={class:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10"},Sa={class:"space-y-6"},Ua={class:"grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4"},Aa=e("label",{for:"first-name",class:"block text-sm font-medium text-gray-700"},"Vorname",-1),za={class:"mt-1"},ja={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Ea=e("label",{for:"last-name",class:"block text-sm font-medium text-gray-700"},"Nachname",-1),Pa={class:"mt-1"},Da={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Ta={class:"sm:col-span-2"},Ma=e("label",{for:"cover-photo",class:"block text-sm font-medium text-gray-700"}," Profilbild ",-1),La={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},Na={key:0,class:"space-y-1 text-center"},Va=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),Wa={class:"flex text-sm text-gray-600"},Ra={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-teal-600 hover:text-teal-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-teal-500"},Oa=e("span",null,"Upload a file",-1),Ia=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1),Ba={key:1},Fa={class:"flex justify-center"},Ja=["src"],Ha={key:0,class:"flex justify-center"},Ga=e("h2",{class:"mt-3 font-normal"},"Warum sollten Sie ein Profilbild verwenden?",-1),Ka=e("p",{class:"text-gray-500 font-light text-sm"}," Wenn Sie ein Profilbild verwenden und es st\xF6\xDFt Ihnen etwas zu k\xF6nnen wir dieses Bilder der Polizei zeigen und dadurch wird die Suche nach Ihnen erleichtert ",-1),Za={class:"sm:col-span-2"},qa=e("label",{for:"company",class:"block text-sm font-medium text-gray-700"},"Email",-1),Xa={class:"mt-1"},Ya={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Qa={class:"sm:col-span-2"},eo=e("label",{for:"address",class:"block text-sm font-medium text-gray-700"},"Strasse + Hausnummer",-1),to={class:"mt-1"},so={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},ao=e("label",{for:"postal-code",class:"block text-sm font-medium text-gray-700"},"Postleitzahl",-1),oo={class:"mt-1"},no={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},ro=e("label",{for:"city",class:"block text-sm font-medium text-gray-700"},"Stadt",-1),lo={class:"mt-1"},io={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},co={class:"sm:col-span-2"},uo=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Passwort",-1),mo={class:"mt-1"},fo={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},po={class:"sm:col-span-2"},ho=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"Passwort best\xE4tigen",-1),vo={class:"mt-1"},go={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},xo={class:"flex items-center justify-between"},yo={class:"text-sm"},_o=["disabled"],bo={setup(w){const n=le();let l=b(!1),i=b(!1),s=b(null),o=b(null),g=b(null),y=b("");const a=Q({vorname:"",nachname:"",email:"",strasse_hnr:"",stadt:"",plz:"",password:"",c_password:""}),p=Q({char1:"",char2:"",char3:"",char4:"",char5:"",char6:""}),j=ne(()=>({vorname:{required:P},nachname:{required:P},email:{required:P,email:ye},strasse_hnr:{required:P},stadt:{required:P},plz:{required:P,numeric:We},password:{required:P,minLength:ue(6)},c_password:{required:P,minLength:ue(6),sameAs:Re(a.password)}}));ne(()=>({char1:{required:P},char2:{required:P},char3:{required:P},char4:{required:P},char5:{required:P},char6:{required:P}}));const f=fe(j,a);function B(_){{let u=_.target;o.value=_.target.files[0];const h=o.value.name;if(h.includes(".jpg")?g.value="jpg":h.includes(".png")?g.value="png":h.includes(".jpeg")&&(g.value="jpeg"),u.files&&u.files[0]){let $=new FileReader;$.onload=z=>{s.value=z.target.result},$.readAsDataURL(u.files[0])}}}async function T(){let _=new FormData;_.append("image",o.value),_.append("titel",a.email),_.append("datentyp",g.value),(await H.post("/sendThumbnail",_,{headers:{"Content-Type":"multipart/form-data"}})).status!=200&&(l.value=!0),setTimeout(()=>{l.value=!1},5e3)}async function V(){(await H.post("/sendDataRegister",{vorname:a.vorname,nachname:a.nachname,email:a.email,strasse_hnr:a.strasse_hnr,stadt:a.stadt,plz:a.plz,password:a.password,link_thumbnail:`http://localhost:2410/images/${a.email}.${g.value}`})).status==200&&(x(),n.push("/"))}async function W(){try{y.value==`${p.char1}${p.char2}${p.char3}${p.char4}${p.char5}${p.char6}`?(await T(),await V()):alert("Code stimmt nicht \xFCberein")}catch(_){console.log(_)}}async function c(_){_.preventDefault();try{if(f.value.$validate(),f.value.$error)console.log("Nicht alle Felder ausgef\xFCllt");else{const{data:u}=await H.post("/sendCodeRegister",{vorname:a.vorname,nachname:a.nachname,email:a.email});y.value=u,console.log("Code: ",y.value),i.value=!0}_.preventDefault()}catch(u){_.preventDefault(),console.log(u.message),l.value=!0,setTimeout(()=>{l.value=!1},5e3),x()}finally{_.preventDefault()}}function x(){a.vorname="",a.nachname="",a.email="",a.strasse_hnr="",a.stadt="",a.plz="",a.telefon="",a.password="",a.c_password=""}return document.addEventListener("DOMContentLoaded",function(_){function u(){const h=document.querySelectorAll("#otp > *[id]");for(let $=0;$<h.length;$++)h[$].addEventListener("keydown",function(z){if(z.key==="Backspace")h[$].value="",$!==0&&h[$-1].focus();else{if($===h.length-1&&h[$].value!=="")return!0;z.keyCode>47&&z.keyCode<58?(h[$].value=z.key,$!==h.length-1&&h[$+1].focus(),z.preventDefault()):z.keyCode>64&&z.keyCode<91&&(h[$].value=String.fromCharCode(z.keyCode),$!==h.length-1&&h[$+1].focus(),z.preventDefault())}})}u()}),(_,u)=>(d(),m(R,null,[r(t(oe),{as:"template",show:t(i)},{default:v(()=>[r(t(te),{as:"div",class:"relative z-10",onClose:u[7]||(u[7]=h=>L(i)?i.value=!1:i=!1)},{default:v(()=>[r(t(J),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[Qs]),_:1}),e("div",ea,[e("div",ta,[r(t(J),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:v(()=>[r(t(se),{class:"relative bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-sm sm:w-full sm:p-6"},{default:v(()=>[e("div",null,[e("div",sa,[r(t(Ne),{class:"h-6 w-6","aria-hidden":"true"})]),e("div",aa,[r(t(ae),{as:"h3",class:"text-lg leading-6 font-medium text-gray-900"},{default:v(()=>[oa]),_:1}),e("div",na,[ra,e("div",la,[e("span",null,[ia,e("span",da,k(t(a).email),1),ca])]),e("div",ua,[C(e("input",{"onUpdate:modelValue":u[0]||(u[0]=h=>t(p).char1=h),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"first",maxlength:"1"},null,512),[[S,t(p).char1]]),C(e("input",{"onUpdate:modelValue":u[1]||(u[1]=h=>t(p).char2=h),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"second",maxlength:"1"},null,512),[[S,t(p).char2]]),C(e("input",{"onUpdate:modelValue":u[2]||(u[2]=h=>t(p).char3=h),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"third",maxlength:"1"},null,512),[[S,t(p).char3]]),C(e("input",{"onUpdate:modelValue":u[3]||(u[3]=h=>t(p).char4=h),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"fourth",maxlength:"1"},null,512),[[S,t(p).char4]]),C(e("input",{"onUpdate:modelValue":u[4]||(u[4]=h=>t(p).char5=h),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"fifth",maxlength:"1"},null,512),[[S,t(p).char5]]),C(e("input",{"onUpdate:modelValue":u[5]||(u[5]=h=>t(p).char6=h),class:"m-2 border h-10 w-10 text-center form-control rounded focus:border-teal-600 focus:ring-teal-600",type:"text",id:"sixth",maxlength:"1"},null,512),[[S,t(p).char6]])])])])]),e("div",ma,[e("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-indigo-600 text-base font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:col-start-2 sm:text-sm",onClick:W}," Verifizieren "),e("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:u[6]||(u[6]=h=>L(i)?i.value=!1:i=!1),ref:"cancelButtonRef"}," Cancel ",512)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),e("div",fa,[e("div",pa,[r(X,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[t(l)?(d(),m("div",ha,[e("div",va,[e("div",ga,[e("div",xa,[r(t(Ve),{class:"h-6 w-6 text-red-500","aria-hidden":"true"})]),ya,e("div",_a,[e("button",{onClick:u[8]||(u[8]=h=>L(l)?l.value=!1:l=!1),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2"},[ba,r(t(re),{class:"h-5 w-5","aria-hidden":"true"})])])])])])):U("",!0)]),_:1})])]),e("div",wa,[$a,e("div",ka,[e("div",Ca,[e("form",Sa,[e("div",null,[e("div",null,[e("div",Ua,[e("div",null,[Aa,e("div",za,[C(e("input",{"onUpdate:modelValue":u[9]||(u[9]=h=>t(a).vorname=h),type:"text",id:"first-name",name:"first-name",autocomplete:"given-name",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(a).vorname]]),t(f).vorname.$invalid?(d(),m("p",ja,k(t(f).vorname.$silentErrors[0].$message),1)):U("",!0)])]),e("div",null,[Ea,e("div",Pa,[C(e("input",{"onUpdate:modelValue":u[10]||(u[10]=h=>t(a).nachname=h),type:"text",id:"last-name",name:"last-name",autocomplete:"family-name",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(a).nachname]]),t(f).nachname.$invalid?(d(),m("p",Da,k(t(f).nachname.$silentErrors[0].$message),1)):U("",!0)])]),e("div",Ta,[Ma,e("div",La,[t(s)?(d(),m("div",Ba,[e("div",Fa,[e("img",{crossorigin:"anonymous",class:"object-scale-down h-48 w-96 mt-3",src:t(s),alt:""},null,8,Ja)])])):(d(),m("div",Na,[Va,e("div",Wa,[e("label",Ra,[Oa,e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",onChange:B},null,32)])]),Ia]))]),t(s)?(d(),m("div",Ha,[e("button",{onClick:u[11]||(u[11]=h=>L(s)?s.value=null:s=null),type:"button",class:"mt-2 inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-600"}," Bild entfernen ")])):U("",!0),Ga,Ka]),e("div",Za,[qa,e("div",Xa,[C(e("input",{"onUpdate:modelValue":u[12]||(u[12]=h=>t(a).email=h),type:"email",name:"email",id:"email",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(a).email]]),t(f).email.$invalid?(d(),m("p",Ya,k(t(f).email.$silentErrors[0].$message),1)):U("",!0)])]),e("div",Qa,[eo,e("div",to,[C(e("input",{"onUpdate:modelValue":u[13]||(u[13]=h=>t(a).strasse_hnr=h),type:"text",name:"address",id:"address",autocomplete:"street-address",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(a).strasse_hnr]]),t(f).strasse_hnr.$invalid?(d(),m("p",so,k(t(f).strasse_hnr.$silentErrors[0].$message),1)):U("",!0)])]),e("div",null,[ao,e("div",oo,[C(e("input",{"onUpdate:modelValue":u[14]||(u[14]=h=>t(a).plz=h),type:"text",name:"postal-code",id:"postal-code",autocomplete:"postal-code",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(a).plz]]),t(f).plz.$invalid?(d(),m("p",no,k(t(f).plz.$silentErrors[0].$message),1)):U("",!0)])]),e("div",null,[ro,e("div",lo,[C(e("input",{"onUpdate:modelValue":u[15]||(u[15]=h=>t(a).stadt=h),type:"text",name:"city",id:"city",autocomplete:"address-level2",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(a).stadt]]),t(f).stadt.$invalid?(d(),m("p",io,k(t(f).stadt.$silentErrors[0].$message),1)):U("",!0)])]),e("div",co,[uo,e("div",mo,[C(e("input",{"onUpdate:modelValue":u[16]||(u[16]=h=>t(a).password=h),type:"password",name:"password",id:"password",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(a).password]]),t(f).password.$invalid?(d(),m("p",fo,k(t(f).password.$silentErrors[0].$message),1)):U("",!0)])]),e("div",po,[ho,e("div",vo,[C(e("input",{"onUpdate:modelValue":u[17]||(u[17]=h=>t(a).c_password=h),type:"password",name:"c_password",id:"c_password",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(a).c_password]]),t(f).c_password.$invalid?(d(),m("p",go,k(t(f).c_password.$silentErrors[0].$message),1)):U("",!0)])])])])]),e("div",xo,[e("div",yo,[e("a",{onClick:u[18]||(u[18]=h=>t(n).push("/")),class:"font-medium text-teal-600 hover:text-teal-500 underline"}," Zum Login ")])]),e("div",null,[_.checkError?(d(),m("button",{key:1,disabled:_.checkError,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-gray-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," Registrieren ",8,_o)):(d(),m("button",{key:0,onClick:c,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," Registrieren "))])])])])])],64))}};var wo=(w,n)=>{const l=w.__vccOpts||w;for(const[i,s]of n)l[i]=s;return l};const $o={},ko={class:"min-h-full pt-16 pb-12 flex flex-col bg-white"},Co=nt('<main class="flex-grow flex flex-col justify-center max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8"><div class="flex-shrink-0 flex justify-center"><a href="/" class="inline-flex"><span class="sr-only">Workflow</span><img class="h-12 w-auto" src="'+ke+'" alt=""></a></div><div class="py-16"><div class="text-center"><p class="text-sm font-semibold text-teal-600 uppercase tracking-wide">404 error</p><h1 class="mt-2 text-4xl font-extrabold text-gray-900 tracking-tight sm:text-5xl"> Page not found. </h1><p class="mt-2 text-base text-gray-500"> Sorry, we couldn\u2019t find the page you\u2019re looking for. </p><div class="mt-6"><a href="/" class="text-base font-medium text-teal-600 hover:text-teal-500">Go back home<span aria-hidden="true"> \u2192</span></a></div></div></div></main><footer class="flex-shrink-0 max-w-7xl w-full mx-auto px-4 sm:px-6 lg:px-8"><nav class="flex justify-center space-x-4"><a href="#" class="text-sm font-medium text-gray-500 hover:text-gray-600">Contact Support</a><span class="inline-block border-l border-gray-300" aria-hidden="true"></span><a href="#" class="text-sm font-medium text-gray-500 hover:text-gray-600">Status</a><span class="inline-block border-l border-gray-300" aria-hidden="true"></span><a href="#" class="text-sm font-medium text-gray-500 hover:text-gray-600">Twitter</a></nav></footer>',2),So=[Co];function Uo(w,n){return d(),m("div",ko,So)}var Ao=wo($o,[["render",Uo]]);const zo=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),jo={class:"fixed z-10 inset-0 overflow-y-auto"},Eo={class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0"},Po={class:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100"},Do={class:"mt-3 text-center sm:mt-5"},To=I(" Warning "),Mo=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"}," Der Tracker ist noch l\xE4uft noch. Wenn Sie sich trotzdem abmelden, wird das Tracking gestoppt. ")],-1),Lo={class:"mt-5 sm:mt-6 sm:grid sm:grid-cols-2 sm:gap-3 sm:grid-flow-row-dense"},No=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Vo={class:"fixed inset-0 overflow-hidden"},Wo={class:"absolute inset-0 overflow-hidden"},Ro={class:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10"},Oo={class:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl"},Io={class:"px-4 sm:px-6"},Bo={class:"flex items-start justify-between"},Fo=I(" Chat mit einem Mitarbeiter "),Jo={class:"ml-3 flex h-7 items-center"},Ho=e("span",{class:"sr-only"},"Close panel",-1),Go={class:"relative mt-6 flex-1 px-4 sm:px-6"},Ko={key:0,class:"w-full max-h-96 border-2 border-gray-300 mb-6 overflow-scroll"},Zo={class:"ml-1 italic font-thin"},qo={class:"relative"},Xo={class:"border border-gray-300 rounded-lg shadow-sm overflow-hidden focus-within:border-teal-500 focus-within:ring-1 focus-within:ring-teal-500"},Yo=e("label",{for:"description",class:"sr-only"},"Description",-1),Qo=e("div",{"aria-hidden":"true"},[e("div",{class:"py-2"},[e("div",{class:"h-9"})]),e("div",{class:"h-px"}),e("div",{class:"py-2"},[e("div",{class:"py-px"},[e("div",{class:"h-9"})])])],-1),en={class:"absolute bottom-0 inset-x-px"},tn={class:"flex flex-wrap justify-end py-2 px-2 space-x-2 sm:px-3"},sn=e("div",{class:"grid grid-cols-3 my-3 mx-2"},[e("div"),e("div",{class:"flex justify-center"},[e("h1",{class:"text-center text-3xl sm:text-4xl"},"Tracking")])],-1),an=e("div",{id:"map",style:{height:"500px"}},null,-1),on={class:"flex flex-row justify-center m-3"},nn={setup(w){let n=b(!1),l=b(!1);const i=G(),s=le();let o=b(null),g=b("pk.eyJ1IjoiY29taW5naG9tZXNhZmUiLCJhIjoiY2wwN3RzZThnMDF3czNjbzFndnNrZ3h4OCJ9.xuaKaO_7XzSqiIBCAvcT7w"),y="mapbox://styles/mapbox/streets-v11",a=b(null),p=b(!1),j=b("Start"),f=b("bg-green-500"),B=b("hover:bg-green-500"),T=b(null),V=b([]),W=b(!1),c=Q({}),x=b(null),_=b("ws://localhost:2410"),u=b(""),h=b([]);me(async()=>{$();try{o.value.loaded()||console.log("nicht loaded map")}catch{console.log("nicht geladen")}navigator.serviceWorker.addEventListener("message",async A=>{console.log(A.data)}),setTimeout(()=>(c=i.getServiceWorker,1500));//! Websocket Verbindung Überwachens
let O=i.getAktivenUser.email;O=O.replace("@","|"),x.value=new WebSocket(_.value,O),x.value.onmessage=A=>{const E=JSON.parse(A.data);console.log(E),E.type=="MessageMitarbeiter"&&h.value.push({from:"Mitarbeiter",message:E.data})}});async function $(){let O=()=>new Promise(function(ce,de){navigator.geolocation.getCurrentPosition(ce,de)}),{coords:{latitude:A,longitude:E}}=await O();a.value={lat:A,lng:E},Z.accessToken=g.value,o.value=new Z.Map({container:"map",style:y,center:[a.value.lng,a.value.lat],zoom:13})}async function z(){c=i.getServiceWorker,p.value?(c.active.postMessage(JSON.stringify({type:"endTracking",userId:i.getAktivenUser.k_id,payload:"Kein Payload"})),p.value=!1,j.value="Start",f.value="bg-green-500",B.value="hover:bg-green-500",clearInterval(T.value),T.value=null,K(),W.value&&(o.value.removeLayer("route"),o.value.removeSource("route"),o.value.removeLayer("point"),o.value.removeSource("point"),o.value.removeLayer("end"),o.value.removeSource("end"))):(p.value=!0,f.value="bg-fuchsia-600",B.value="hover:bg-fuchsia-600",j.value="Stop",c.active.postMessage(JSON.stringify({type:"startTracking",userId:i.getAktivenUser.k_id,payload:"Kein Payload"})),T.value=setInterval(M,5e3))}async function M(){if(navigator.geolocation){let O=()=>new Promise(function(Fe,Je){navigator.geolocation.getCurrentPosition(Fe,Je)}),{coords:{latitude:A,longitude:E}}=await O();o.value.flyTo({center:[E,A],zoom:15});const de=(await H.get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${E},${A}.json?access_token=${g.value}`)).data.features[0].place_name;console.log(de),K();const Be=new Z.Marker({anchor:"center",color:"#03C04A"}).setLngLat([E,A]).addTo(o.value).setPopup(new Z.Popup().setHTML(`<p>Deine Position: ${de} </p>`));V.value.push(Be),a.value={lat:A,lng:E},o.value.center=[a.value.lng,a.value.lat];const pe=new Date;let Ue={lat:A,lng:E,dateTime:`${pe.getHours()}:${pe.getMinutes()}:${pe.getSeconds()}`,id:1,user:i.getAktivenUser,adresse:de};c.active.postMessage(JSON.stringify({type:"tracking",userId:i.getAktivenUser.k_id,payload:Ue})),await H.post("/sendPosition",Ue)}else alert("Dieser Browser unterst\xFCtzt die Abfrage der Geolocation nicht.")}function D(){c.active.postMessage(JSON.stringify({type:"setAlarm",userId:i.getAktivenUser.k_id,payload:i.getAktivenUser}))}function K(){V.value.forEach(O=>{O.remove()})}function F(){p.value=!1,j.value="Start",f.value="bg-green-500",B.value="hover:bg-green-500",clearInterval(T.value),T.value=null,K(),W.value&&(o.value.removeLayer("route"),o.value.removeSource("route"),o.value.removeLayer("point"),o.value.removeSource("point"),o.value.removeLayer("end"),o.value.removeSource("end")),i.disconnectFromServiceWorker(),n.value=!1,s.push("/")}function ie(O){O.preventDefault(),x.value.send(JSON.stringify({type:"MessageUser",daten:u.value,from:i.getAktivenUser.email})),h.value.push({from:"Ich",message:u.value}),u.value=""}async function Se(O){x.value.send(JSON.stringify({type:"MessageUser",daten:O,from:i.getAktivenUser.email})),h.value.push({from:"Ich",message:O}),u.value=""}return(O,A)=>(d(),m(R,null,[r(t(oe),{as:"template",show:t(n)},{default:v(()=>[r(t(te),{as:"div",class:"relative z-10",onClose:A[1]||(A[1]=E=>L(n)?n.value=!1:n=!1)},{default:v(()=>[r(t(J),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[zo]),_:1}),e("div",jo,[e("div",Eo,[r(t(J),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:v(()=>[r(t(se),{class:"relative bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full sm:p-6"},{default:v(()=>[e("div",null,[e("div",Po,[r(t(Oe),{class:"h-6 w-6 text-orange-600","aria-hidden":"true"})]),e("div",Do,[r(t(ae),{as:"h3",class:"text-lg leading-6 font-medium text-gray-900"},{default:v(()=>[To]),_:1}),Mo])]),e("div",Lo,[e("button",{type:"button",class:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 sm:col-start-2 sm:text-sm",onClick:F}," Akzeptieren "),e("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 sm:mt-0 sm:col-start-1 sm:text-sm",onClick:A[0]||(A[0]=E=>L(n)?n.value=!1:n=!1),ref:"cancelButtonRef"}," Cancle ",512)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),r(t(oe),{as:"template",show:t(l)},{default:v(()=>[r(t(te),{as:"div",class:"relative z-10",onClose:A[6]||(A[6]=E=>L(l)?l.value=!0:l=!0)},{default:v(()=>[r(t(J),{as:"template",enter:"ease-in-out duration-500","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-500","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[No]),_:1}),e("div",Vo,[e("div",Wo,[e("div",Ro,[r(t(J),{as:"template",enter:"transform transition ease-in-out duration-500 sm:duration-700","enter-from":"translate-x-full","enter-to":"translate-x-0",leave:"transform transition ease-in-out duration-500 sm:duration-700","leave-from":"translate-x-0","leave-to":"translate-x-full"},{default:v(()=>[r(t(se),{class:"pointer-events-auto w-screen max-w-md"},{default:v(()=>[e("div",Oo,[e("div",Io,[e("div",Bo,[r(t(ae),{class:"text-lg font-medium text-gray-900"},{default:v(()=>[Fo]),_:1}),e("div",Jo,[e("button",{type:"button",class:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2",onClick:A[2]||(A[2]=E=>L(l)?l.value=!1:l=!1)},[Ho,r(t(ve),{class:"h-6 w-6","aria-hidden":"true"})])])])]),e("div",Go,[t(h).length>0?(d(),m("div",Ko,[(d(!0),m(R,null,Y(t(h),(E,ce)=>(d(),m("p",{key:ce},[e("span",Zo,k(E.from)+":",1),I(" "+k(E.message),1)]))),128))])):U("",!0),e("form",qo,[e("div",Xo,[Yo,C(e("textarea",{"onUpdate:modelValue":A[3]||(A[3]=E=>L(u)?u.value=E:u=E),rows:"2",name:"description",id:"description",class:"block w-full border-0 py-0 resize-none placeholder-gray-500 focus:ring-0 sm:text-sm",placeholder:"Schreiben Sie eine Nachticht"},null,512),[[S,t(u)]]),Qo]),e("div",en,[e("div",tn,[e("span",{onClick:A[4]||(A[4]=E=>Se("Ich brauche hilfe")),class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-red-100 text-red-800"}," Ich brauche hilfe "),e("span",{onClick:A[5]||(A[5]=E=>Se("Alles OK")),class:"inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-medium bg-green-100 text-green-800"}," Alles in Ordnung ")]),e("div",{class:"border-t border-gray-200 px-2 py-2 flex items-center space-x-3 sm:px-3 justify-end mr-3"},[e("button",{onClick:ie,class:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," Senden ")])])])])])]),_:1})]),_:1})])])])]),_:1})]),_:1},8,["show"]),e("div",null,[sn,an,e("div",on,[e("button",{onClick:z,type:"button",class:N(`inline-flex items-center px-6 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white ${t(f)} ${t(B)} `)},k(t(j)),3),t(p)?(d(),m("button",{key:0,onClick:D,type:"button",class:N("mx-3 inline-flex items-center px-6 py-2 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700")}," Alarm ")):U("",!0),t(p)?(d(),m("button",{key:1,onClick:A[7]||(A[7]=E=>L(l)?l.value=!0:l=!0),type:"button",class:"mx-2 inline-flex items-center p-3 border border-transparent rounded-full shadow-sm text-white bg-chsBlue hover:bg-chsDarkBlue focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[r(t(Le),{class:"h-6 w-6","aria-hidden":"true"})])):U("",!0)])])],64))}},rn={class:"pt-2 pb-3 px-2 space-y-1"},ln={class:"pt-4 pb-3 border-t border-sky-800"},dn={class:"flex items-center px-4"},cn={class:"flex-shrink-0"},un=["src"],mn={class:"ml-3"},fn={class:"text-base font-medium text-white"},pn={class:"text-sm font-medium text-sky-200"},hn={type:"button",class:"ml-auto flex-shrink-0 rounded-full p-1 text-sky-200 hover:bg-sky-800 hover:text-white focus:outline-none focus:bg-sky-900 focus:ring-2 focus:ring-offset-2 focus:ring-offset-sky-900 focus:ring-white"},vn=e("span",{class:"sr-only"},"View notifications",-1),gn={class:"mt-3 px-2"},xn=e("div",{class:"absolute inset-0 flex"},[e("div",{class:"h-full w-1/2",style:{"background-color":"#0a527b"}}),e("div",{class:"h-full w-1/2",style:{"background-color":"#065d8c"}})],-1),yn=e("div",{class:"relative flex justify-center"},[e("svg",{class:"flex-shrink-0",width:"1750",height:"308",viewBox:"0 0 1750 308",xmlns:"http://www.w3.org/2000/svg"},[e("path",{d:"M284.161 308H1465.84L875.001 182.413 284.161 308z",fill:"#0369a1"}),e("path",{d:"M1465.84 308L16.816 0H1750v308h-284.16z",fill:"#065d8c"}),e("path",{d:"M1733.19 0L284.161 308H0V0h1733.19z",fill:"#0a527b"}),e("path",{d:"M875.001 182.413L1733.19 0H16.816l858.185 182.413z",fill:"#0a4f76"})])],-1),_n=[xn,yn],bn=e("header",{class:"relative py-10"},[e("div",{class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},[e("h1",{class:"text-3xl font-bold text-white"},"Settings")])],-1),wn={setup(w){return(n,l)=>(d(),m("div",null,[r(t(Me),{as:"div",class:"relative bg-sky-700 pb-32 overflow-hidden"},{default:v(({open:i})=>[e("nav",{class:N([i?"bg-sky-900":"bg-transparent","relative z-10 border-b border-teal-500 border-opacity-25 lg:bg-transparent lg:border-none"])},[r(t(rt),{class:"bg-sky-900 lg:hidden"},{default:v(()=>[e("div",rn,[(d(!0),m(R,null,Y(n.navigation,s=>(d(),q(t(De),{key:s.name,as:"a",href:s.href,class:N([s.current?"bg-black bg-opacity-25":"hover:bg-sky-800","block rounded-md py-2 px-3 text-base font-medium text-white"])},{default:v(()=>[I(k(s.name),1)]),_:2},1032,["href","class"]))),128))]),e("div",ln,[e("div",dn,[e("div",cn,[e("img",{class:"rounded-full h-10 w-10",src:n.user.imageUrl,alt:""},null,8,un)]),e("div",mn,[e("div",fn,k(n.user.name),1),e("div",pn,k(n.user.email),1)]),e("button",hn,[vn,r(t(lt),{class:"h-6 w-6","aria-hidden":"true"})])]),e("div",gn,[(d(!0),m(R,null,Y(n.userNavigation,s=>(d(),q(t(De),{key:s.name,as:"a",href:s.href,class:"block rounded-md py-2 px-3 text-base font-medium text-sky-200 hover:text-white hover:bg-sky-800"},{default:v(()=>[I(k(s.name),1)]),_:2},1032,["href"]))),128))])])]),_:1})],2),e("div",{"aria-hidden":"true",class:N([i?"bottom-0":"inset-y-0","absolute inset-x-0 left-1/2 transform -translate-x-1/2 w-full overflow-hidden lg:inset-y-0"])},_n,2),bn]),_:1}),r(t(ge))]))}},$n={"aria-live":"assertive",class:"z-40 fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start"},kn={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},Cn={key:0,class:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},Sn={class:"p-4"},Un={class:"flex items-start"},An={class:"flex-shrink-0"},zn=e("div",{class:"ml-3 w-0 flex-1 pt-0.5"},[e("p",{class:"text-sm font-medium text-gray-900"},"Erfolgreich ge\xE4ndert!"),e("p",{class:"mt-1 text-sm text-gray-500"},"Die Daten wurden erfolgreich ge\xE4ndert")],-1),jn={class:"ml-4 flex-shrink-0 flex"},En=e("span",{class:"sr-only"},"Close",-1),Pn={"aria-live":"assertive",class:"z-40 fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start"},Dn={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},Tn={key:0,class:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},Mn={class:"p-4"},Ln={class:"flex items-start"},Nn={class:"flex-shrink-0"},Vn=e("div",{class:"ml-3 w-0 flex-1 pt-0.5"},[e("p",{class:"text-sm font-medium text-gray-900"},"Error"),e("p",{class:"mt-1 text-sm text-gray-500"},"Es ist ein Fehler aufgetreten")],-1),Wn={class:"ml-4 flex-shrink-0 flex"},Rn=e("span",{class:"sr-only"},"Close",-1),On={class:"relative -mt-32"},In={class:"max-w-screen-xl mx-auto pb-6 px-4 sm:px-6 lg:pb-16 lg:px-8"},Bn={class:"bg-white rounded-lg shadow overflow-hidden"},Fn={class:"lg:grid lg:grid-cols-12 lg:divide-y-0 lg:divide-x"},Jn={class:"py-6 lg:col-span-3"},Hn={class:"space-y-1"},Gn=["onClick","aria-current"],Kn={class:"truncate"},Zn=e("hr",null,null,-1),qn={class:"lg:col-span-9 mt-12"},Xn=e("h1",{class:"text-center text-3xl mt-3"},"Ihr Account",-1),Yn=e("p",{class:"my-3 mb-4 mx-2"}," Hier k\xF6nnen Sie die pers\xF6nlichen Daten von Ihrem Account \xE4ndern bzw. aktualisieren ",-1),Qn=e("hr",null,null,-1),er={class:"space-y-6 mt-4 mx-2"},tr={class:"grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4"},sr=e("label",{for:"first-name",class:"block text-sm font-medium text-gray-700"},"Vorname",-1),ar={class:"mt-1"},or={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},nr=e("label",{for:"last-name",class:"block text-sm font-medium text-gray-700"},"Nachname",-1),rr={class:"mt-1"},lr={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},ir={class:"sm:col-span-2"},dr=e("label",{for:"cover-photo",class:"block text-sm font-medium text-gray-700"}," Profilbild ",-1),cr={class:"mt-1 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md"},ur={key:0,class:"space-y-1 text-center"},mr=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48","aria-hidden":"true"},[e("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})],-1),fr={class:"flex text-sm text-gray-600"},pr={for:"file-upload",class:"relative cursor-pointer bg-white rounded-md font-medium text-teal-600 hover:text-teal-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-teal-500"},hr=e("span",null,"Upload a file",-1),vr=e("p",{class:"text-xs text-gray-500"},"PNG, JPG, GIF up to 10MB",-1),gr={key:1},xr={class:"flex justify-center"},yr=["src"],_r={key:0,class:"flex justify-center"},br=e("h2",{class:"mt-4 font-normal"},"Warum sollten Sie ein Profilbild verwenden?",-1),wr=e("p",{class:"text-gray-500 font-light text-sm"}," Wenn Sie ein Profilbild verwenden und es st\xF6\xDFt Ihnen etwas zu k\xF6nnen wir dieses Bilder der Polizei zeigen und dadurch wird die Suche nach Ihnen erleichtert ",-1),$r={class:"sm:col-span-2"},kr=e("label",{for:"company",class:"block text-sm font-medium text-gray-700"},"Email",-1),Cr={class:"mt-1"},Sr={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Ur={class:"sm:col-span-2"},Ar=e("label",{for:"address",class:"block text-sm font-medium text-gray-700"},"Strasse + Hausnummer",-1),zr={class:"mt-1"},jr={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Er=e("label",{for:"postal-code",class:"block text-sm font-medium text-gray-700"},"Postleitzahl",-1),Pr={class:"mt-1"},Dr={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Tr=e("label",{for:"city",class:"block text-sm font-medium text-gray-700"},"Stadt",-1),Mr={class:"mt-1"},Lr={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Nr={setup(w){const n=le(),l=G(),i=[{name:"Account",href:"/account",icon:be,current:!0},{name:"Password",href:"/account/password",icon:we,current:!1},{name:"Delete Account",href:"/account/deleteAccount",icon:$e,current:!1}],s=Q({vorname:"",nachname:"",email:"",strasse_hnr:"",stadt:"",plz:""});let o=b(null),g=b(null),y=b(null),a=b(!1),p=b(!1);const j=ne(()=>({vorname:{required:P},nachname:{required:P},email:{required:P,email:ye},strasse_hnr:{required:P},stadt:{required:P},plz:{required:P,numeric:We}})),f=fe(j,s);me(()=>{let c=l.getAktivenUser;s.vorname=c.vorname,s.nachname=c.nachname,s.email=c.email,s.strasse_hnr=c.strasse,s.plz=c.plz,s.stadt=c.ort,o.value=c.link_thumbnail});async function B(c){c.preventDefault();try{g.value?(console.log("Daten und Bild \xE4ndern"),await V(),await W()):(console.log("Nur Daten schicken"),W())}catch(x){console.log("error",x)}}function T(c){{let x=c.target;g.value=c.target.files[0];const _=g.value.name;if(_.includes(".jpg")?y.value="jpg":_.includes(".png")?y.value="png":_.includes(".jpeg")&&(y.value="jpeg"),x.files&&x.files[0]){let u=new FileReader;u.onload=h=>{o.value=h.target.result},u.readAsDataURL(x.files[0])}}}async function V(){let c=new FormData;return c.append("image",g.value),c.append("titel",s.email),c.append("datentyp",y.value),await H.post("/sendThumbnail",c,{headers:{"Content-Type":"multipart/form-data"}})}async function W(){try{const{data:c}=await H.patch(`/patchUser/${l.getAktivenUser.k_id}`,{vorname:s.vorname,nachname:s.nachname,email:s.email,strasse_hnr:s.strasse_hnr,stadt:s.stadt,plz:s.plz});l.changeAktivenUser(c),a.value=!0,setTimeout(()=>{a.value=!1,window.location.reload()},2e3)}catch(c){console.log("Error beim Daten schicken",c),p.value=!0,setTimeout(()=>{p.value=!1},3e3)}}return(c,x)=>(d(),m(R,null,[e("div",$n,[e("div",kn,[r(X,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[t(a)?(d(),m("div",Cn,[e("div",Sn,[e("div",Un,[e("div",An,[r(t(xe),{class:"h-6 w-6 text-green-400","aria-hidden":"true"})]),zn,e("div",jn,[e("button",{type:"button",onClick:x[0]||(x[0]=_=>L(a)?a.value=!1:a=!1),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[En,r(t(re),{class:"h-5 w-5","aria-hidden":"true"})])])])])])):U("",!0)]),_:1})])]),e("div",Pn,[e("div",Dn,[r(X,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[t(p)?(d(),m("div",Tn,[e("div",Mn,[e("div",Ln,[e("div",Nn,[r(t(Ie),{class:"h-6 w-6 text-red-400","aria-hidden":"true"})]),Vn,e("div",Wn,[e("button",{type:"button",onClick:x[1]||(x[1]=_=>L(p)?p.value=!1:p=!1),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500"},[Rn,r(t(re),{class:"h-5 w-5","aria-hidden":"true"})])])])])])):U("",!0)]),_:1})])]),e("main",On,[e("div",In,[e("div",Bn,[e("div",Fn,[e("aside",Jn,[e("nav",Hn,[(d(),m(R,null,Y(i,_=>e("a",{onClick:u=>t(n).push(_.href),key:_.name,class:N([_.current?"bg-teal-50 border-teal-500 text-teal-700 hover:bg-teal-50 hover:text-teal-700":"border-transparent text-gray-900 hover:bg-gray-50 hover:text-gray-900","group border-l-4 px-3 py-2 flex items-center text-sm font-medium"]),"aria-current":_.current?"page":void 0},[(d(),q(_e(_.icon),{class:N([_.current?"text-teal-500 group-hover:text-teal-500":"text-gray-400 group-hover:text-gray-500","flex-shrink-0 -ml-1 mr-3 h-6 w-6"]),"aria-hidden":"true"},null,8,["class"])),e("span",Kn,k(_.name),1)],10,Gn)),64))])]),Zn,e("div",qn,[Xn,Yn,Qn,e("form",er,[e("div",null,[e("div",null,[e("div",tr,[e("div",null,[sr,e("div",ar,[C(e("input",{"onUpdate:modelValue":x[2]||(x[2]=_=>t(s).vorname=_),type:"text",id:"first-name",name:"first-name",autocomplete:"given-name",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(s).vorname]]),t(f).vorname.$invalid?(d(),m("p",or,k(t(f).vorname.$silentErrors[0].$message),1)):U("",!0)])]),e("div",null,[nr,e("div",rr,[C(e("input",{"onUpdate:modelValue":x[3]||(x[3]=_=>t(s).nachname=_),type:"text",id:"last-name",name:"last-name",autocomplete:"family-name",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(s).nachname]]),t(f).nachname.$invalid?(d(),m("p",lr,k(t(f).nachname.$silentErrors[0].$message),1)):U("",!0)])]),e("div",ir,[dr,e("div",cr,[t(o)?(d(),m("div",gr,[e("div",xr,[e("img",{crossorigin:"anonymous",class:"object-scale-down h-48 w-96 mt-3",src:t(o),alt:""},null,8,yr)])])):(d(),m("div",ur,[mr,e("div",fr,[e("label",pr,[hr,e("input",{id:"file-upload",name:"file-upload",type:"file",class:"sr-only",onChange:T},null,32)])]),vr]))]),t(o)?(d(),m("div",_r,[e("button",{onClick:x[4]||(x[4]=_=>L(o)?o.value=null:o=null),type:"button",class:"mt-2 inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-red-500 hover:bg-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-600"}," Bild entfernen ")])):U("",!0),br,wr]),e("div",$r,[kr,e("div",Cr,[C(e("input",{"onUpdate:modelValue":x[5]||(x[5]=_=>t(s).email=_),type:"email",name:"email",id:"email",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(s).email]]),t(f).email.$invalid?(d(),m("p",Sr,k(t(f).email.$silentErrors[0].$message),1)):U("",!0)])]),e("div",Ur,[Ar,e("div",zr,[C(e("input",{"onUpdate:modelValue":x[6]||(x[6]=_=>t(s).strasse_hnr=_),type:"text",name:"address",id:"address",autocomplete:"street-address",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(s).strasse_hnr]]),t(f).strasse_hnr.$invalid?(d(),m("p",jr,k(t(f).strasse_hnr.$silentErrors[0].$message),1)):U("",!0)])]),e("div",null,[Er,e("div",Pr,[C(e("input",{"onUpdate:modelValue":x[7]||(x[7]=_=>t(s).plz=_),type:"text",name:"postal-code",id:"postal-code",autocomplete:"postal-code",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(s).plz]]),t(f).plz.$invalid?(d(),m("p",Dr,k(t(f).plz.$silentErrors[0].$message),1)):U("",!0)])]),e("div",null,[Tr,e("div",Mr,[C(e("input",{"onUpdate:modelValue":x[8]||(x[8]=_=>t(s).stadt=_),type:"text",name:"city",id:"city",autocomplete:"address-level2",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(s).stadt]]),t(f).stadt.$invalid?(d(),m("p",Lr,k(t(f).stadt.$silentErrors[0].$message),1)):U("",!0)])])])])]),e("div",null,[e("button",{onClick:B,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," Daten aktualisieren ")])])])])])])])],64))}},Vr=e("div",{class:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"},null,-1),Wr={class:"fixed z-10 inset-0 overflow-y-auto"},Rr={class:"flex items-end sm:items-center justify-center min-h-full p-4 text-center sm:p-0"},Or={class:"sm:flex sm:items-start"},Ir={class:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-red-100 sm:mx-0 sm:h-10 sm:w-10"},Br={class:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"},Fr=I(" Deactivate account "),Jr=e("div",{class:"mt-2"},[e("p",{class:"text-sm text-gray-500"}," Are you sure you want to deactivate your account? All of your data will be permanently removed from our servers forever. This action cannot be undone. ")],-1),Hr={class:"mt-5 sm:mt-4 sm:ml-10 sm:pl-4 sm:flex"},Gr={class:"relative -mt-32"},Kr={class:"max-w-screen-xl mx-auto pb-6 px-4 sm:px-6 lg:pb-16 lg:px-8"},Zr={class:"bg-white rounded-lg shadow overflow-hidden"},qr={class:"divide-y divide-gray-200 lg:grid lg:grid-cols-12 lg:divide-y-0 lg:divide-x"},Xr={class:"py-6 lg:col-span-3"},Yr={class:"space-y-1"},Qr=["onClick","aria-current"],el={class:"truncate"},tl={class:"divide-gray-200 lg:col-span-9 mx-3 mb-7"},sl=e("h1",{class:"text-center text-2xl my-5"},"Delete Account",-1),al=e("p",null,"Wenn Sie ihren Account l\xF6schen, werden alle Daten entfernt.",-1),ol={class:"flex flex-row justify-center mt-4"},nl={setup(w){const n=G(),l=le(),i=b(!1),s=[{name:"Account",href:"/account",icon:be,current:!1},{name:"Password",href:"/account/password",icon:we,current:!1},{name:"Delete Account",href:"/account/deleteAccount",icon:$e,current:!0}];async function o(){try{await H.delete(`/deleteAccount/${n.getAktivenUser.k_id}`),n.deleteAktivenUser(),l.push("/")}catch(g){console.log(g)}}return(g,y)=>(d(),m(R,null,[r(t(oe),{as:"template",show:i.value},{default:v(()=>[r(t(te),{as:"div",class:"relative z-10",onClose:y[1]||(y[1]=a=>i.value=!1)},{default:v(()=>[r(t(J),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:v(()=>[Vr]),_:1}),e("div",Wr,[e("div",Rr,[r(t(J),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95","enter-to":"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 translate-y-0 sm:scale-100","leave-to":"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"},{default:v(()=>[r(t(se),{class:"relative bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:max-w-lg sm:w-full sm:p-6"},{default:v(()=>[e("div",Or,[e("div",Ir,[r(t(Oe),{class:"h-6 w-6 text-red-600","aria-hidden":"true"})]),e("div",Br,[r(t(ae),{as:"h3",class:"text-lg leading-6 font-medium text-gray-900"},{default:v(()=>[Fr]),_:1}),Jr])]),e("div",Hr,[e("button",{type:"button",class:"inline-flex justify-center w-full rounded-md border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:w-auto sm:text-sm",onClick:o}," Deactivate "),e("button",{type:"button",class:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 px-4 py-2 bg-white text-base font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:y[0]||(y[0]=a=>i.value=!1),ref:"cancelButtonRef"}," Cancel ",512)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),e("main",Gr,[e("div",Kr,[e("div",Zr,[e("div",qr,[e("aside",Xr,[e("nav",Yr,[(d(),m(R,null,Y(s,a=>e("a",{onClick:p=>g.$router.push(a.href),key:a.name,class:N([a.current?"bg-teal-50 border-teal-500 text-teal-700 hover:bg-teal-50 hover:text-teal-700":"border-transparent text-gray-900 hover:bg-gray-50 hover:text-gray-900","group border-l-4 px-3 py-2 flex items-center text-sm font-medium"]),"aria-current":a.current?"page":void 0},[(d(),q(_e(a.icon),{class:N([a.current?"text-teal-500 group-hover:text-teal-500":"text-gray-400 group-hover:text-gray-500","flex-shrink-0 -ml-1 mr-3 h-6 w-6"]),"aria-hidden":"true"},null,8,["class"])),e("span",el,k(a.name),1)],10,Qr)),64))])]),e("div",tl,[sl,al,e("div",ol,[e("button",{onClick:y[2]||(y[2]=a=>i.value=!0),type:"button",class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700"}," Account l\xF6schen ")])])])])])])],64))}},rl={"aria-live":"assertive",class:"z-40 fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start"},ll={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},il={key:0,class:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},dl={class:"p-4"},cl={class:"flex items-start"},ul={class:"flex-shrink-0"},ml=e("div",{class:"ml-3 w-0 flex-1 pt-0.5"},[e("p",{class:"text-sm font-medium text-gray-900"},"Erfolgreich ge\xE4ndert!"),e("p",{class:"mt-1 text-sm text-gray-500"},"Das Passwort wurde erfolgreich ge\xE4ndert")],-1),fl={class:"ml-4 flex-shrink-0 flex"},pl=e("span",{class:"sr-only"},"Close",-1),hl={"aria-live":"assertive",class:"z-40 fixed inset-0 flex items-end px-4 py-6 pointer-events-none sm:p-6 sm:items-start"},vl={class:"w-full flex flex-col items-center space-y-4 sm:items-end"},gl={key:0,class:"max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden"},xl={class:"p-4"},yl={class:"flex items-start"},_l={class:"flex-shrink-0"},bl=e("div",{class:"ml-3 w-0 flex-1 pt-0.5"},[e("p",{class:"text-sm font-medium text-gray-900"},"Error"),e("p",{class:"mt-1 text-sm text-gray-500"},"Es ist ein Fehler aufgetreten")],-1),wl={class:"ml-4 flex-shrink-0 flex"},$l=e("span",{class:"sr-only"},"Close",-1),kl={class:"relative -mt-32"},Cl={class:"max-w-screen-xl mx-auto pb-6 px-4 sm:px-6 lg:pb-16 lg:px-8"},Sl={class:"bg-white rounded-lg shadow overflow-hidden"},Ul={class:"lg:grid lg:grid-cols-12 lg:divide-y-0 lg:divide-x"},Al={class:"py-6 lg:col-span-3"},zl={class:"space-y-1"},jl=["onClick","aria-current"],El={class:"truncate"},Pl=e("hr",null,null,-1),Dl={class:"lg:col-span-9 mt-12 mx-2"},Tl=e("h1",{class:"text-center text-2xl"},"Passwort \xE4ndern",-1),Ml=e("p",{class:"text-center mt-2"},"Hier k\xF6nnen Sie Ihr Passwort \xE4ndern",-1),Ll={class:"space-y-6 mt-6"},Nl={class:"grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-4"},Vl={class:"sm:col-span-2"},Wl=e("label",{for:"password",class:"block text-sm font-medium text-gray-700"},"Passwort",-1),Rl={class:"mt-1"},Ol={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Il={class:"sm:col-span-2"},Bl=e("label",{for:"phone",class:"block text-sm font-medium text-gray-700"},"Passwort best\xE4tigen",-1),Fl={class:"mt-1"},Jl={key:0,class:"mt-2 text-sm text-red-600",id:"email-error"},Hl={setup(w){const n=G(),l=[{name:"Account",href:"/account",icon:be,current:!1},{name:"Password",href:"/account/password",icon:we,current:!0},{name:"Delete Account",href:"/account/deleteAccount",icon:$e,current:!1}],i=b(!1),s=b(!1),o=Q({password:"",c_password:""}),g=ne(()=>({password:{required:P,minLength:ue(6)},c_password:{required:P,minLength:ue(6),sameAs:Re(o.password)}})),y=fe(g,o);async function a(p){p.preventDefault();try{if(y.value.$validate(),y.value.$error)console.log("Nicht alle Felder ausgef\xFCllt");else{const j=await H.patch(`/changePassword/${n.getAktivenUser.k_id}`,{password:o.password});o.c_password="",o.c_password="",n.setAktivenUser(j.data),i.value=!0,setTimeout(()=>i.value=!1,3e3)}}catch(j){s.value=!0,setTimeout(()=>s.value=!1,3e3),console.log(j.message)}}return(p,j)=>(d(),m(R,null,[e("div",rl,[e("div",ll,[r(X,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[i.value?(d(),m("div",il,[e("div",dl,[e("div",cl,[e("div",ul,[r(t(xe),{class:"h-6 w-6 text-green-400","aria-hidden":"true"})]),ml,e("div",fl,[e("button",{type:"button",onClick:j[0]||(j[0]=f=>i.value=!1),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"},[pl,r(t(re),{class:"h-5 w-5","aria-hidden":"true"})])])])])])):U("",!0)]),_:1})])]),e("div",hl,[e("div",vl,[r(X,{"enter-active-class":"transform ease-out duration-300 transition","enter-from-class":"translate-y-2 opacity-0 sm:translate-y-0 sm:translate-x-2","enter-to-class":"translate-y-0 opacity-100 sm:translate-x-0","leave-active-class":"transition ease-in duration-100","leave-from-class":"opacity-100","leave-to-class":"opacity-0"},{default:v(()=>[s.value?(d(),m("div",gl,[e("div",xl,[e("div",yl,[e("div",_l,[r(t(Ie),{class:"h-6 w-6 text-red-400","aria-hidden":"true"})]),bl,e("div",wl,[e("button",{type:"button",onClick:j[1]||(j[1]=f=>s.value=!1),class:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-500"},[$l,r(t(re),{class:"h-5 w-5","aria-hidden":"true"})])])])])])):U("",!0)]),_:1})])]),e("main",kl,[e("div",Cl,[e("div",Sl,[e("div",Ul,[e("aside",Al,[e("nav",zl,[(d(),m(R,null,Y(l,f=>e("a",{key:f.name,onClick:B=>p.$router.push(f.href),class:N([f.current?"bg-teal-50 border-teal-500 text-teal-700 hover:bg-teal-50 hover:text-teal-700":"border-transparent text-gray-900 hover:bg-gray-50 hover:text-gray-900","group border-l-4 px-3 py-2 flex items-center text-sm font-medium"]),"aria-current":f.current?"page":void 0},[(d(),q(_e(f.icon),{class:N([f.current?"text-teal-500 group-hover:text-teal-500":"text-gray-400 group-hover:text-gray-500","flex-shrink-0 -ml-1 mr-3 h-6 w-6"]),"aria-hidden":"true"},null,8,["class"])),e("span",El,k(f.name),1)],10,jl)),64))])]),Pl,e("div",Dl,[Tl,Ml,e("form",Ll,[e("div",null,[e("div",null,[e("div",Nl,[e("div",Vl,[Wl,e("div",Rl,[C(e("input",{"onUpdate:modelValue":j[2]||(j[2]=f=>t(o).password=f),type:"password",name:"password",id:"password",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(o).password]]),t(y).password.$invalid?(d(),m("p",Ol,k(t(y).password.$silentErrors[0].$message),1)):U("",!0)])]),e("div",Il,[Bl,e("div",Fl,[C(e("input",{"onUpdate:modelValue":j[3]||(j[3]=f=>t(o).c_password=f),type:"password",name:"c_password",id:"c_password",class:"block w-full border-gray-300 rounded-md shadow-sm focus:ring-teal-500 focus:border-teal-500 sm:text-sm"},null,512),[[S,t(o).c_password]]),t(y).c_password.$invalid?(d(),m("p",Jl,k(t(y).c_password.$silentErrors[0].$message),1)):U("",!0)])])])])]),e("div",null,[e("button",{onClick:a,class:"w-full flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-teal-600 hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-teal-500"}," \xC4ndern ")])])])])])])])],64))}},Gl=it({history:dt("/"),routes:[{path:"/usermap",name:"usermap",component:nn,beforeEnter:(w,n,l)=>{G().getAktivenUser?l():l("/")}},{path:"/",name:"Login_RegisterView",component:wt,children:[{path:"",component:Ys},{path:"register",component:bo},{path:"pw_vergessen",component:()=>bt(()=>import("./Comp_PW_Vergessen.6deeadd7.js"),["assets/Comp_PW_Vergessen.6deeadd7.js","assets/vendor.4f04759c.js"])}]},{path:"/mitarbeiterMap",name:"UserMap",component:fs,beforeEnter:(w,n,l)=>{G().aktiverUser.isadmin?l():l("/")}},{path:"/account",name:"account",component:wn,children:[{path:"",component:Nr},{path:"password",component:Hl},{path:"deleteAccount",component:nl}],beforeEnter:(w,n,l)=>{G().getAktivenUser?l():l("/")}},{path:"/:pathmatch(.*)*",name:"not-found",component:Ao}]});location.origin==="http://localhost:8080"&&(H.defaults.baseURL="http://localhost:2410");const Ce=ct(xt);Ce.use(Gl);const Kl=ut();Ce.use(Kl);Ce.mount("#app");export{ke as _};
